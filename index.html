<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes, viewport-fit=cover">
    <title>‚ú® Ramadan Legacy Quest - Enchanted Family Edition ‚ú®</title>
    
    <!-- Font Awesome 6 (Icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- CSS Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>

<body class="light-mode">
    <!-- FIXED RAMADAN DECORATIONS -->
    <div class="mosque-decoration"></div>
    <div class="lanterns">
        <span class="lantern"><i class="fas fa-lantern"></i></span>
        <span class="lantern"><i class="fas fa-lantern"></i></span>
        <span class="lantern"><i class="fas fa-lantern"></i></span>
    </div>
    <div class="stars-fixed">
        <span class="star" style="top: 10%; left: 5%;"><i class="fas fa-star"></i></span>
        <span class="star" style="top: 15%; right: 10%;"><i class="fas fa-star"></i></span>
        <span class="star" style="bottom: 20%; left: 15%;"><i class="fas fa-star"></i></span>
        <span class="star" style="bottom: 10%; right: 20%;"><i class="fas fa-star"></i></span>
        <span class="star" style="top: 25%; left: 25%;"><i class="fas fa-star"></i></span>
        <span class="star" style="top: 70%; right: 15%;"><i class="fas fa-star"></i></span>
        <span class="star" style="bottom: 30%; right: 30%;"><i class="fas fa-star"></i></span>
    </div>
    <div class="moon-fixed">
        <i class="fas fa-moon"></i>
    </div>

    <!-- THEME TOGGLE BUTTON -->
    <div class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
    </div>

    <!-- CELEBRATION MODAL -->
    <div class="modal-overlay" id="modalOverlay"></div>
    <div class="celebration-modal" id="celebrationModal">
        <i class="fas fa-star modal-star"></i>
        <i class="fas fa-moon modal-moon"></i>
        <h2 id="modalTitle">‚ú® Mabrook! ‚ú®</h2>
        <p id="modalMessage"></p>
        <button onclick="closeModal()"><i class="fas fa-heart"></i> Continue</button>
    </div>

    <!-- MAIN GAME CONTAINER -->
    <div class="container">
        <header>
            <h1><i class="fas fa-mosque"></i> Ramadan Legacy Quest <i class="fas fa-moon"></i></h1>
            <p class="subtitle"><i class="fas fa-sparkle"></i> 30 Days of Blessings & Family Fun <i class="fas fa-sparkle"></i></p>

            <!-- FAMILY CODE SECTION -->
            <div class="family-code-section">
                <i class="fas fa-users family-icon"></i>
                <div class="family-input-group">
                    <input type="text" id="familyCodeInput" class="family-code-input" placeholder="Enter family code" maxlength="10">
                    <button id="joinFamilyBtn" class="join-family-btn"><i class="fas fa-door-open"></i> Join Family</button>
                    <button id="createFamilyBtn" class="create-family-btn"><i class="fas fa-plus-circle"></i> Create</button>
                </div>
                <div class="family-display-group">
                    <span class="family-label">üè† Current Family:</span>
                    <span id="familyCodeDisplay" class="code-display">üî¥ NOT JOINED</span>
                </div>
            </div>

            <!-- MOON TRACKER -->
            <div class="moon-tracker" id="moonTracker"></div>

            <!-- POINTS DISPLAY -->
            <div class="points-display">
                <h2 id="currentDay">Day 1 of Ramadan</h2>
                <p class="points-text"><i class="fas fa-coins"></i> Family Fortune: <span id="totalPoints">0</span> points</p>
            </div>
        </header>

        <!-- GAME GRID - MAIN CARDS -->
        <div class="game-grid">
            <!-- CARD 1: CHARACTER SELECTION -->
            <div class="card">
                <h3><i class="fas fa-user-crescent"></i> 1. Choose Character</h3>
                <select id="characterSelect" class="character-select">
                    <option value="">-- Select Your Role --</option>
                    <option value="guardian">üõ°Ô∏è The Guardian (Family Bonus)</option>
                    <option value="seeker">üìñ The Seeker (Quran Bonus)</option>
                    <option value="nourisher">üçΩÔ∏è The Nourisher (Iftar Bonus)</option>
                    <option value="connector">ü§ù The Connector (Community)</option>
                    <option value="healer">üíö The Healer (Patience)</option>
                    <option value="illuminator">ü™î The Illuminator (Creative)</option>
                </select>
                <input type="text" id="playerName" class="player-name-input" placeholder="Your name">
                <button id="joinGameBtn" class="join-quest-btn"><i class="fas fa-user-plus"></i> Join Quest</button>
                <div class="player-list" id="playerList"></div>
            </div>

            <!-- CARD 2: DAILY DEVOTION -->
            <div class="card">
                <h3><i class="fas fa-tasks"></i> 2. Daily Devotion</h3>
                
                <label><i class="fas fa-utensils"></i> Fast Completed?</label>
                <select id="fastSelect">
                    <option value="0">No</option>
                    <option value="1">Yes! (+1)</option>
                </select>

                <label><i class="fas fa-book-open"></i> Quran Time</label>
                <select id="quranSelect">
                    <option value="0">0-9 min</option>
                    <option value="1">10-19 min (+1)</option>
                    <option value="2">20-29 min (+2)</option>
                    <option value="3">30+ min (+3)</option>
                </select>

                <label><i class="fas fa-mosque"></i> Daily Prayers</label>
                <select id="prayerSelect">
                    <option value="0">0</option>
                    <option value="1">1 (+1)</option>
                    <option value="2">2 (+2)</option>
                    <option value="3">3 (+3)</option>
                    <option value="4">4 (+4)</option>
                    <option value="5">5 (+5)</option>
                </select>

                <label><i class="fas fa-shield"></i> Character Mission</label>
                <select id="missionSelect">
                    <option value="0">Not completed</option>
                    <option value="2">Completed! (+2)</option>
                </select>

                <div class="button-group">
                    <button id="submitDailyBtn"><i class="fas fa-paper-plane"></i> Submit</button>
                    <button id="spotDeedBtn"><i class="fas fa-eye"></i> Spot Secret</button>
                </div>
            </div>

            <!-- CARD 3: DUA DICE + QUESTS -->
            <div class="card">
                <h3><i class="fas fa-dice"></i> 3. Dua Dice</h3>
                <button id="rollDiceBtn" class="dice-btn"><i class="fas fa-dice-d20"></i> ROLL</button>
                <div class="dice-result" id="diceResult">
                    ‚ú® Click ROLL for a family prompt ‚ú®
                </div>
                
                <h3 class="quest-heading"><i class="fas fa-flag"></i> 4. Weekly Quest</h3>
                <p id="currentQuest" class="quest-text">
                    üåü Week 1: 5 Ramadan traditions
                </p>
                <button id="completeQuestBtn" class="quest-btn"><i class="fas fa-check-circle"></i> Complete Quest</button>
            </div>
        </div>

        <!-- CHARACTER ROLES GUIDE CARD (EXPANDED) -->
        <div class="card roles-card">
            <div class="roles-header" onclick="toggleRoles()">
                <h3><i class="fas fa-users-cog"></i> Character Roles Guide <span class="toggle-icon">‚ñº</span></h3>
            </div>
            <div id="rolesContent" class="roles-content" style="display: block;">
                <!-- Guardian -->
                <div class="role-item">
                    <div class="role-icon">üõ°Ô∏è</div>
                    <div class="role-info">
                        <h4>The Guardian</h4>
                        <p class="role-desc">The protector and anchor of the family. Excels at keeping everyone connected and spiritually grounded.</p>
                        <div class="role-bonus">
                            <span class="bonus-tag">‚ú® Family Bonus</span>
                            <span class="bonus-text">+2 points when 3+ family members check in</span>
                        </div>
                        <div class="role-special">
                            <strong>Special Ability:</strong> "Legacy Blessing" - Your consistent worship grants bonus points to all players on weekends
                        </div>
                    </div>
                </div>
                
                <!-- Seeker -->
                <div class="role-item">
                    <div class="role-icon">üìñ</div>
                    <div class="role-info">
                        <h4>The Seeker</h4>
                        <p class="role-desc">Passionate about learning and teaching. Always seeking deeper understanding of the Qur'an and Islam.</p>
                        <div class="role-bonus">
                            <span class="bonus-tag">‚ú® Qur'an Bonus</span>
                            <span class="bonus-text">Double points for Qur'an reading (30+ min = 6 points!)</span>
                        </div>
                        <div class="role-special">
                            <strong>Special Ability:</strong> "Tadabbur Vision" - Can earn double points for Qur'an reflection and sharing insights
                        </div>
                    </div>
                </div>
                
                <!-- Nourisher -->
                <div class="role-item">
                    <div class="role-icon">üçΩÔ∏è</div>
                    <div class="role-info">
                        <h4>The Nourisher</h4>
                        <p class="role-desc">Feeds body and soul. Brings the family together through food, hospitality, and generosity.</p>
                        <div class="role-bonus">
                            <span class="bonus-tag">‚ú® Iftar Bonus</span>
                            <span class="bonus-text">+1 point per guest when hosting iftar (max +5)</span>
                        </div>
                        <div class="role-special">
                            <strong>Special Ability:</strong> "Iftar Multiplication" - Hosting iftar earns points √ó number of guests
                        </div>
                    </div>
                </div>
                
                <!-- Connector -->
                <div class="role-item">
                    <div class="role-icon">ü§ù</div>
                    <div class="role-info">
                        <h4>The Connector</h4>
                        <p class="role-desc">Builds bridges between family members. Keeps everyone in touch, especially those far away.</p>
                        <div class="role-bonus">
                            <span class="bonus-tag">‚ú® Community Bonus</span>
                            <span class="bonus-text">+3 points for contacting distant relatives</span>
                        </div>
                        <div class="role-special">
                            <strong>Special Ability:</strong> "Community Chain" - Reaching out to relatives creates combo bonuses for the whole family
                        </div>
                    </div>
                </div>
                
                <!-- Healer -->
                <div class="role-item">
                    <div class="role-icon">üíö</div>
                    <div class="role-info">
                        <h4>The Healer</h4>
                        <p class="role-desc">Brings peace and forgiveness. Mends relationships and soothes hearts with patience and duas.</p>
                        <div class="role-bonus">
                            <span class="bonus-tag">‚ú® Patience Bonus</span>
                            <span class="bonus-text">+2 points for resolving conflicts or forgiving someone</span>
                        </div>
                        <div class="role-special">
                            <strong>Special Ability:</strong> "Patience Reservoir" - Can absorb family stress and convert it to blessings
                        </div>
                    </div>
                </div>
                
                <!-- Illuminator -->
                <div class="role-item">
                    <div class="role-icon">ü™î</div>
                    <div class="role-info">
                        <h4>The Illuminator</h4>
                        <p class="role-desc">Brings light and creativity. Makes worship beautiful and engaging for everyone.</p>
                        <div class="role-bonus">
                            <span class="bonus-tag">‚ú® Creative Bonus</span>
                            <span class="bonus-text">+2 points for creating Ramadan crafts, decorations, or nasheeds</span>
                        </div>
                        <div class="role-special">
                            <strong>Special Ability:</strong> "Creative Worship" - Can design alternative worship methods for bonus points
                        </div>
                    </div>
                </div>
                
                <div class="roles-footer">
                    <p><i class="fas fa-star"></i> Each role has unique bonuses! Choose the one that fits your personality best. <i class="fas fa-star"></i></p>
                </div>
            </div>
        </div>

        <!-- FAMILY GOAL CARD - 1100 POINTS -->
        <div class="card goal-card">
            <h3 class="goal-title"><i class="fas fa-trophy trophy-icon"></i> FAMILY GOAL: 1100 POINTS!</h3>
            
            <div class="goal-container">
                <div class="progress-container">
                    <div class="progress-header">
                        <span class="progress-label">üéØ Progress:</span>
                        <span id="goalProgress" class="progress-value">0 / 1100</span>
                    </div>
                    
                    <div class="progress-bar-container">
                        <div id="goalProgressFill" class="progress-bar-fill" style="width: 0%;"></div>
                    </div>
                    
                    <div class="progress-footer">
                        <span id="goalPercentage" class="percentage">0%</span>
                        <span class="goal-target">‚ú® 1100 ‚ú®</span>
                    </div>
                    
                    <div id="goalCelebration" class="goal-celebration">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>GOAL ACHIEVED! TIME TO CELEBRATE!</span>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
                
                <div class="treats-container">
                    <h4 class="treats-title"><i class="fas fa-gift"></i> Family Treats <span id="treatCount" class="treat-count">0</span></h4>
                    
                    <div class="add-treat-container">
                        <input type="text" id="treatInput" class="treat-input" placeholder="Add a treat (e.g. Pizza party!)">
                        <button id="addTreatBtn" class="add-treat-btn"><i class="fas fa-plus"></i> Add</button>
                    </div>
                    
                    <div id="treatList" class="treat-list"></div>
                    
                    <button id="claimRewardBtn" class="claim-btn"><i class="fas fa-gift"></i> CLAIM A TREAT!</button>
                    <p class="treat-note"><i class="fas fa-info-circle"></i> Reach 1100 points to unlock treats!</p>
                </div>
            </div>
        </div>

        <!-- DAILY CHECK-IN & REFLECTION SECTION -->
        <div class="card checkin-card">
            <h3 class="checkin-title"><i class="fas fa-calendar-check checkin-icon"></i> ‚òÄÔ∏èüåô Daily Ramadan Check-In (No Points)</h3>
            
            <p class="checkin-intro">
                <i class="fas fa-heart"></i> Check in twice daily to stay connected with your family, wherever you are!
            </p>
            
            <div class="checkin-grid">
                
                <!-- MORNING CHECK-IN -->
                <div class="checkin-morning">
                    <div class="checkin-header">
                        <div class="checkin-icon morning-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="checkin-header-text">
                            <h4>Morning Check-In</h4>
                            <p>Fajr - Start of Fast</p>
                        </div>
                    </div>
                    
                    <div class="checkin-stats">
                        <span>Today's Check-Ins:</span>
                        <span id="morningCheckInCount" class="checkin-count">0 / 0</span>
                    </div>
                    
                    <div id="morningCheckInList" class="checkin-list"></div>
                    
                    <button id="morningCheckInBtn" class="morning-btn"><i class="fas fa-sun"></i> I'm Fasting Today ‚òÄÔ∏è</button>
                    <p class="checkin-note"><i class="fas fa-info-circle"></i> Let family know you started your fast</p>
                </div>
                
                <!-- EVENING CHECK-IN -->
                <div class="checkin-evening">
                    <div class="checkin-header">
                        <div class="checkin-icon evening-icon">
                            <i class="fas fa-moon"></i>
                        </div>
                        <div class="checkin-header-text">
                            <h4>Evening Check-In</h4>
                            <p>Maghrib - Iftar Time</p>
                        </div>
                    </div>
                    
                    <div class="checkin-stats">
                        <span>Today's Check-Ins:</span>
                        <span id="eveningCheckInCount" class="checkin-count">0 / 0</span>
                    </div>
                    
                    <div id="eveningCheckInList" class="checkin-list"></div>
                    
                    <button id="eveningCheckInBtn" class="evening-btn"><i class="fas fa-moon"></i> Fast Completed üåô</button>
                    <p class="checkin-note"><i class="fas fa-info-circle"></i> Let family know your fast was accepted</p>
                </div>
                
                <!-- REFLECTION SECTION -->
                <div class="reflection-section">
                    <div class="checkin-header">
                        <div class="checkin-icon reflection-icon">
                            <i class="fas fa-pen-fancy"></i>
                        </div>
                        <div class="checkin-header-text">
                            <h4>Family Reflections</h4>
                            <p>Share your Ramadan thoughts</p>
                        </div>
                    </div>
                    
                    <textarea id="reflectionInput" class="reflection-input" rows="3" placeholder="What did you learn today? What touched your heart? What dua are you making?"></textarea>
                    
                    <button id="saveReflectionBtn" class="reflection-btn"><i class="fas fa-save"></i> Share Reflection</button>
                    
                    <div class="recent-reflections">
                        <div class="reflections-header">
                            <span>üìù Recent Reflections</span>
                            <span class="reflections-limit">Last 10</span>
                        </div>
                        <div id="reflectionsList" class="reflections-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- FAMILY LOG CARD -->
        <div class="card log-card">
            <h3><i class="fas fa-scroll"></i> Family Fortune Log</h3>
            <div class="log" id="familyLog"></div>
            <div class="action-buttons">
                <button id="shareGameBtn"><i class="fas fa-share-alt"></i> Share</button>
                <button id="resetDayBtn"><i class="fas fa-sun"></i> New Day</button>
                <button id="exportDataBtn"><i class="fas fa-download"></i> Save</button>
                <button id="helpBtn"><i class="fas fa-question-circle"></i> Guide</button>
            </div>
        </div>
    </div>

    <!-- JavaScript File -->
    <script src="script.js"></script>
</body>
</html>
